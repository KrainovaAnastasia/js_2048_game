!function(){var t=new(function(){var t;function e(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.state=t||[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle"}return t=[{key:"updateUI",value:function(){var t=this;document.querySelectorAll(".field-cell").forEach(function(e,a){var n=Math.floor(a/4),s=t.state[n][a%4];e.className="field-cell",s>0?(e.classList.add("field-cell--".concat(s)),e.textContent=s):e.textContent=""}),document.querySelector(".game-score").textContent=this.score}},{key:"addRandomTile",value:function(){var t=[];if(this.state.forEach(function(e,a){e.forEach(function(e,n){0===e&&t.push({row:a,col:n})})}),t.length>0){var e=Math.floor(Math.random()*t.length),a=t[e],n=a.row,s=a.col,i=.9>Math.random()?2:4;this.state[n][s]=i}}},{key:"moveRight",value:function(){for(var t=this,e=!1,a=0;a<4;a++)!function(a){for(var n=t.state[a].filter(function(t){return 0!==t}),s=0;s<n.length-1;s++)n[s]===n[s+1]&&(n[s]*=2,t.score+=n[s],n[s+1]=0);for(var i=n.filter(function(t){return 0!==t});i.length<4;)i.unshift(0);i.toString()!==t.state[a].toString()&&(t.state[a]=i,e=!0)}(a);e&&(this.addRandomTile(),this.updateUI())}},{key:"moveLeft",value:function(){for(var t=this,e=!1,a=0;a<4;a++)!function(a){for(var n=t.state[a].filter(function(t){return 0!==t}),s=0;s<n.length-1;s++)n[s]===n[s+1]&&(n[s]*=2,t.score+=n[s],n[s+1]=0);for(var i=n.filter(function(t){return 0!==t});i.length<4;)i.push(0);i.toString()!==t.state[a].toString()&&(t.state[a]=i,e=!0)}(a);e&&(this.addRandomTile(),this.updateUI())}},{key:"moveUp",value:function(){for(var t=this,e=!1,a=0;a<4;a++)!function(a){for(var n=[],s=0;s<4;s++)0!==t.state[s][a]&&n.push(t.state[s][a]);for(var i=0;i<n.length-1;i++)n[i]===n[i+1]&&(n[i]*=2,t.score+=n[i],n[i+1]=0);for(var o=n.filter(function(t){return 0!==t});o.length<4;)o.push(0);for(var r=0;r<4;r++)t.state[r][a]!==o[r]&&(t.state[r][a]=o[r],e=!0)}(a);e&&(this.addRandomTile(),this.updateUI())}},{key:"moveDown",value:function(){for(var t=this,e=!1,a=0;a<4;a++)!function(a){for(var n=[],s=3;s>=0;s--)0!==t.state[s][a]&&n.push(t.state[s][a]);for(var i=0;i<n.length-1;i++)n[i]===n[i+1]&&(n[i]*=2,t.score+=n[i],n[i+1]=0);for(var o=n.filter(function(t){return 0!==t});o.length<4;)o.push(0);for(var r=0;r<4;r++)t.state[3-r][a]!==o[r]&&(t.state[3-r][a]=o[r],e=!0)}(a);e&&(this.addRandomTile(),this.updateUI())}},{key:"getScore",value:function(){}},{key:"getState",value:function(){}},{key:"getStatus",value:function(){for(var t=!1,e=!1,a=0;a<4;a++)for(var n=0;n<4;n++){if(2048===this.state[a][n])return this.status="win","win";0===this.state[a][n]&&(t=!0),(a<3&&this.state[a][n]===this.state[a+1][n]||n<3&&this.state[a][n]===this.state[a][n+1])&&(e=!0)}return t||e?(this.status="playing","playing"):(this.status="lose","lose")}},{key:"start",value:function(){this.status="playing",this.addRandomTile(),this.addRandomTile(),this.updateUI()}},{key:"restart",value:function(){this.state=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="playing",this.addRandomTile(),this.addRandomTile(),this.updateUI(),this.getStatus()}}],function(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,t),e}()),e=document.getElementById("start-button"),a=document.querySelector(".message-start"),n=document.querySelector(".message-win"),s=document.querySelector(".message-lose");function i(t){"win"===t?(n.classList.remove("hidden"),s.classList.add("hidden")):"lose"===t?(s.classList.remove("hidden"),n.classList.add("hidden"),e.textContent="Restart",e.classList.add("restart"),e.classList.remove("start")):(n.classList.add("hidden"),s.classList.add("hidden"))}e.addEventListener("click",function(){"Start"===e.textContent?(a.classList.add("hidden"),t.start(),e.textContent="Restart"):(t.restart(),a.classList.add("hidden"),i("playing"))}),document.addEventListener("keydown",function(e){switch(e.key){case"ArrowLeft":t.moveLeft();break;case"ArrowRight":t.moveRight();break;case"ArrowUp":t.moveUp();break;case"ArrowDown":t.moveDown()}var a=document.querySelectorAll(".field-cell");a.forEach(function(t){t.classList.add("moving")}),t.updateUI(),i(t.getStatus()),setTimeout(function(){a.forEach(function(t){t.classList.remove("moving")})},300)})}();
//# sourceMappingURL=index.ce7c1c10.js.map
